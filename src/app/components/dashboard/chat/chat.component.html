<div id="frame">
  <div id="sidepanel">
    <!-- <div id="profile">
      <div class="wrap">
        <img id="profile-img" src="http://emilcarlsson.se/assets/mikeross.png" class="online" alt="" />
        <p>{{helpService.getUserFirstname()}} {{helpService.getUserLastname()}}</p>
        <i class="fa fa-chevron-down expand-button" aria-hidden="true"></i>
        <div id="status-options">
          <ul>
            <li id="status-online" class="active">
              <span class="status-circle"></span>
              <p>Online</p>
            </li>
            <li id="status-away">
              <span class="status-circle"></span>
              <p>Away</p>
            </li>
            <li id="status-busy">
              <span class="status-circle"></span>
              <p>Busy</p>
            </li>
            <li id="status-offline">
              <span class="status-circle"></span>
              <p>Offline</p>
            </li>
          </ul>
        </div>
        <div id="expanded">
          <label for="twitter"><i class="fa fa-facebook fa-fw" aria-hidden="true"></i></label>
          <input name="twitter" type="text" value="mikeross" />
          <label for="twitter"><i class="fa fa-twitter fa-fw" aria-hidden="true"></i></label>
          <input name="twitter" type="text" value="ross81" />
          <label for="twitter"><i class="fa fa-instagram fa-fw" aria-hidden="true"></i></label>
          <input name="twitter" type="text" value="mike.ross" />
        </div>
      </div>
    </div> -->
    <div id="search">
      <label for=""><i class="fa fa-search" aria-hidden="true"></i></label>
      <input type="text" placeholder="Search contacts..." [(ngModel)]="searchTerm" />
    </div>
    <div id="contacts" *ngIf="users">
      <ul class="contacts-ul">
        <li class="contact {{kindergardenId === receiveUser?.id ? 'active' : ''}}" (click)="selectKindergarden()">
          <div class="wrap">
            <img src="../../../../assets/icons/public.png" alt="" />
            <div class="meta">
              <p *ngIf="newMessageNotification && newMessageNotification[kindergardenId] && !receiveUser"
                class="new_message">
                new</p>
              <p class="name mb-0">Public</p>
            </div>
          </div>
        </li>
        <li class="contact" (click)="selectKindergarden()">
          <div class="wrap">
            <img src="../../../../assets/icons/group.png" alt="" />
            <div class="meta">
              <!-- <p *ngIf="newMessageNotification && newMessageNotification[item.id] && !receiveUser" class="new_message">
                new</p> -->
              <p class="name mb-0">My group</p>
            </div>
          </div>
        </li>
        <hr class="m-0">
        <p class="text-center contacts-title mt-2">Contacts</p>
        <li *ngFor="let item of users | searchInput: searchTerm"
          class="contact {{item.id === receiveUser?.id ? 'active' : ''}}" (click)="selectUser(item)">
          <div class="wrap">
            <!-- <span class="contact-status away"></span> -->
            <img src="../../../../assets/icons/profile_pic.png" alt="" />
            <div class="meta">
              <p *ngIf="newMessageNotification && newMessageNotification[item.id] && !receiveUser" class="new_message">
                new</p>
              <p class="name mb-0">{{item.firstname}} {{item.lastname}} </p>
              <!-- <p *ngIf="newMessageNotification && newMessageNotification[item.id]" class="preview">
                {{newMessageNotification[item.id]}}
              </p> -->
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div id="bottom-bar">
      <!-- <button id="addcontact">
        <i class="fa fa-user-plus fa-fw" aria-hidden="true"></i>
        <span>Add contact</span>
      </button>
      <button id="settings">
        <i class="fa fa-cog fa-fw" aria-hidden="true"></i> <span>Settings</span>
      </button> -->
      <div class="chat-copyright  d-none d-md-block">
        <p class="title">KidsNode Chat</p>
        <p class="text">Powered by <a href="www.kidsnode.com" target="_blank">kidsnode.com</a></p>
      </div>
    </div>
  </div>
  <div class="content">
    <div class="contact-profile row m-0">
      <div class="col-xs-6 col-sm-6">
        <div>
          <a aria-current="page" class="muted-link pb-1 d-inline-block hidden breadcrumb-back active p-0"
            routerLink="../dashboard"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 20 20"
              fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
              class="cs-icon chevron-left">
              <path d="M13 16L7.35355 10.3536C7.15829 10.1583 7.15829 9.84171 7.35355 9.64645L13 4"></path>
            </svg><span class="align-middle text-small ms-1">{{
              language.backButton
              }}</span></a>
        </div>
      </div>
      <div class="col-xs-6 col-sm-6">
        <div class="float-right">
          <!-- <img src="http://emilcarlsson.se/assets/harveyspecter.png" alt="" /> -->
          <p class="d-none d-sm-block">{{helpService.getUserFirstname()}} {{helpService.getUserLastname()}}</p>
        </div>
      </div>
    </div>
    <div *ngIf="!receiveUser||loader" class="outer">
      <div class="middle">
        <div class="inner">
          <div *ngIf="loader">
            <app-loader></app-loader>
          </div>
          <div *ngIf="!loader">
            <img class="chat-icon" src="../../../../assets/icons/chat.png">
            <div class="chat-text">KidsNode Chat</div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="receiveUser&&!loader">
      <div id="messages" class="messages" *ngIf="messages&&messages.length">
        <ul>
          <li *ngFor="let item of messages"
            class="{{item && item.sender_id !== helpService.getUserId() ? 'sent' : 'replies'}}">
            <!-- <img src="http://emilcarlsson.se/assets/donnapaulsen.png" alt="" />
            <p class="chat-name" *ngIf="item.sender_id === helpService.getUserId()">{{helpService.getUserFirstname()}}</p>
            <p class="chat-name" *ngIf="item.received_id === helpService.getUserId()">{{receiveUser.firstname}}</p> -->
            <p class="item-message">{{item.message}}</p>
          </li>
        </ul>
      </div>
      <div class="outer postbox-empty" *ngIf="!messages || messages.length === 0">
        <div class="middle">
          <div class="inner">
            <div>
              <img class="chat-icon" src="../../../../assets/icons/postbox.png">
              <h4>Your postbox is empty</h4>
              <h5>Start correspondence.</h5>
            </div>
          </div>
        </div>
      </div>
      <div class="message-input">
        <div class="wrap">
          <textarea type="text" placeholder="Write your message..." [(ngModel)]="message"
            (keyup.enter)="sendMessage()"></textarea>
          <!-- <i class="fa fa-paperclip attachment" aria-hidden="true"></i> -->
          <button class="submit" (click)="sendMessage()">
            <i class="fa fa-paper-plane" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>