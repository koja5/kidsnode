<div *ngIf="!data" style="height: 70vh">
  <app-loader></app-loader>
</div>

<div
  *ngIf="data"
  class="col-lg-12 control-section card-control-section vertical_card_layout mt-3"
>
  <div class="options row mb-3">
    <div class="col-xs-12 col-sm-12 col-md-12 text-center">
      <h5>{{ language.recordsOfArrivalFor }} {{ getTodayDate() }}</h5>
    </div>
  </div>
  <div class="row e-sample-resize-container e-card-resize-container">
    <div
      class="col-xs-12 col-sm-6 col-md-6 col-lg-3 mb-3"
      *ngFor="let item of data; let i = index"
    >
      <div
        tabindex="0"
        class="e-card profile"
        style="justify-content: flex-start"
      >
        <div class="e-card-header">
          <div class="e-card-header-image e-card-corner">
            <app-avatar
              [name]="item.firstname + ' ' + item.lastname"
            ></app-avatar>
            <div class="status">
              <div
                *ngIf="
                  reportingPresence[item.id] &&
                  !reportingPresence[item.id].end_date
                "
                class="online"
                [title]="language.employeeOnline"
              ></div>
              <div
                *ngIf="
                  !reportingPresence[item.id] ||
                  reportingPresence[item.id].end_date
                "
                class="offline"
                [title]="language.employeeOffline"
              ></div>
            </div>
          </div>
        </div>
        <div class="e-card-header">
          <div class="e-card-header-caption center">
            <div class="e-card-header-title">
              {{ item.firstname }} {{ item.lastname }}
            </div>
          </div>
        </div>
        <div class="e-card-separator"></div>
        <div class="text-muted text-center status-info">
          <div *ngIf="reportingPresence[item.id]">
            <p *ngIf="reportingPresence[item.id].start_date" class="mb-0">
              {{ language.employeeSignInWorkDate }}
              {{
                reportingPresence[item.id].start_date | date: "dd.MM.yyyy HH:mm"
              }}
            </p>
            <p *ngIf="reportingPresence[item.id].end_date">
              {{ language.employeeSignOutWorkDate }}
              {{
                reportingPresence[item.id].end_date | date: "dd.MM.yyyy HH:mm"
              }}
            </p>
          </div>
          <div *ngIf="!reportingPresence[item.id]" class="mt-3">
            <p>{{ language.employeeOffline }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
